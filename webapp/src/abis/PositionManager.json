[
{"type":"constructor","inputs":[{"name":"_oracle","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},
{"type":"function","name":"addMargin","inputs":[{"name":"positionId","type":"uint256","internalType":"uint256"},{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},
{"type":"function","name":"calculateHealthFactor","inputs":[{"name":"positionId","type":"uint256","internalType":"uint256"},{"name":"currentPrice","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"healthFactor","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},
{"type":"function","name":"closePosition","inputs":[{"name":"positionId","type":"uint256","internalType":"uint256"},{"name":"exitPrice","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},
{"type":"function","name":"getPosition","inputs":[{"name":"positionId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"position","type":"tuple","internalType":"struct PositionManager.Position","components":[{"name":"positionId","type":"uint256","internalType":"uint256"},{"name":"trader","type":"address","internalType":"address"},{"name":"asset","type":"address","internalType":"address"},{"name":"size","type":"uint256","internalType":"uint256"},{"name":"entryPrice","type":"uint256","internalType":"uint256"},{"name":"margin","type":"uint256","internalType":"uint256"},{"name":"leverage","type":"uint256","internalType":"uint256"},{"name":"isLong","type":"bool","internalType":"bool"},{"name":"timestamp","type":"uint256","internalType":"uint256"},{"name":"isOpen","type":"bool","internalType":"bool"},{"name":"unrealizedPnl","type":"uint256","internalType":"uint256"},{"name":"realizedPnl","type":"int256","internalType":"int256"}]}],"stateMutability":"view"},
{"type":"function","name":"getUserPositions","inputs":[{"name":"user","type":"address","internalType":"address"}],"outputs":[{"name":"positionIds","type":"uint256[]","internalType":"uint256[]"}],"stateMutability":"view"},
{"type":"function","name":"getUserStats","inputs":[{"name":"user","type":"address","internalType":"address"}],"outputs":[{"name":"stats","type":"tuple","internalType":"struct PositionManager.PositionStats","components":[{"name":"totalPositions","type":"uint256","internalType":"uint256"},{"name":"openPositions","type":"uint256","internalType":"uint256"},{"name":"totalVolume","type":"uint256","internalType":"uint256"},{"name":"totalPnl","type":"int256","internalType":"int256"}]}],"stateMutability":"view"},
{"type":"function","name":"liquidatePosition","inputs":[{"name":"positionId","type":"uint256","internalType":"uint256"},{"name":"liquidationPrice","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},
{"type":"function","name":"liquidationThreshold","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},
{"type":"function","name":"maxLeverage","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},
{"type":"function","name":"minMargin","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},
{"type":"function","name":"nextPositionId","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},
{"type":"function","name":"openPosition","inputs":[{"name":"asset","type":"address","internalType":"address"},{"name":"size","type":"uint256","internalType":"uint256"},{"name":"entryPrice","type":"uint256","internalType":"uint256"},{"name":"margin","type":"uint256","internalType":"uint256"},{"name":"leverage","type":"uint256","internalType":"uint256"},{"name":"isLong","type":"bool","internalType":"bool"}],"outputs":[{"name":"positionId","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},
{"type":"function","name":"oracle","inputs":[],"outputs":[{"name":"","type":"address","internalType":"contract IDataStreamOracle"}],"stateMutability":"view"},
{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},
{"type":"function","name":"positions","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"positionId","type":"uint256","internalType":"uint256"},{"name":"trader","type":"address","internalType":"address"},{"name":"asset","type":"address","internalType":"address"},{"name":"size","type":"uint256","internalType":"uint256"},{"name":"entryPrice","type":"uint256","internalType":"uint256"},{"name":"margin","type":"uint256","internalType":"uint256"},{"name":"leverage","type":"uint256","internalType":"uint256"},{"name":"isLong","type":"bool","internalType":"bool"},{"name":"timestamp","type":"uint256","internalType":"uint256"},{"name":"isOpen","type":"bool","internalType":"bool"},{"name":"unrealizedPnl","type":"uint256","internalType":"uint256"},{"name":"realizedPnl","type":"int256","internalType":"int256"}],"stateMutability":"view"},
{"type":"function","name":"removeMargin","inputs":[{"name":"positionId","type":"uint256","internalType":"uint256"},{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},
{"type":"function","name":"renounceOwnership","inputs":[],"outputs":[],"stateMutability":"nonpayable"},
{"type":"function","name":"stalenessThreshold","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},
{"type":"function","name":"totalPositions","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},
{"type":"function","name":"totalVolume","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},
{"type":"function","name":"transferOwnership","inputs":[{"name":"newOwner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},
{"type":"function","name":"updateLiquidationThreshold","inputs":[{"name":"_liquidationThreshold","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},
{"type":"function","name":"updateMaxLeverage","inputs":[{"name":"_maxLeverage","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},
{"type":"function","name":"updateMinMargin","inputs":[{"name":"_minMargin","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},
{"type":"function","name":"updateUnrealizedPnl","inputs":[{"name":"positionId","type":"uint256","internalType":"uint256"},{"name":"currentPrice","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},
{"type":"function","name":"userPositions","inputs":[{"name":"","type":"address","internalType":"address"},{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},
{"type":"function","name":"userStats","inputs":[{"name":"","type":"address","internalType":"address"}],"outputs":[{"name":"totalPositions","type":"uint256","internalType":"uint256"},{"name":"openPositions","type":"uint256","internalType":"uint256"},{"name":"totalVolume","type":"uint256","internalType":"uint256"},{"name":"totalPnl","type":"int256","internalType":"int256"}],"stateMutability":"view"},
{"type":"event","name":"MarginAdded","inputs":[{"name":"positionId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},
{"type":"event","name":"MarginRemoved","inputs":[{"name":"positionId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},
{"type":"event","name":"OwnershipTransferred","inputs":[{"name":"previousOwner","type":"address","indexed":true,"internalType":"address"},{"name":"newOwner","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},
{"type":"event","name":"PositionClosed","inputs":[{"name":"positionId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"exitPrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"pnl","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"isProfit","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false},
{"type":"event","name":"PositionLiquidated","inputs":[{"name":"positionId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"liquidationPrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"loss","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},
{"type":"event","name":"PositionOpened","inputs":[{"name":"positionId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"asset","type":"address","indexed":true,"internalType":"address"},{"name":"size","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"entryPrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"margin","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"leverage","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"isLong","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false},
{"type":"error","name":"OwnableInvalidOwner","inputs":[{"name":"owner","type":"address","internalType":"address"}]},
{"type":"error","name":"OwnableUnauthorizedAccount","inputs":[{"name":"account","type":"address","internalType":"address"}]},
{"type":"error","name":"ReentrancyGuardReentrantCall","inputs":[]}
] 