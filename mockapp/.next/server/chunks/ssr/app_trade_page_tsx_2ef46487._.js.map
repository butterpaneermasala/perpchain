{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/sahilkaushik/study_material/blockchain/foundry/perpchain/mockapp/app/trade/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\n\nconst mockAssets = [\n\t{ symbol: \"ETH\", address: \"0x0000000000000000000000000000000000000003\" },\n\t{ symbol: \"BTC\", address: \"0x0000000000000000000000000000000000000004\" },\n];\n\nlet nextPositionId = 1;\n\nexport default function TradePage() {\n\tconst [asset, setAsset] = useState(mockAssets[0].address);\n\tconst [size, setSize] = useState(\"\");\n\tconst [leverage, setLeverage] = useState(1);\n\tconst [isLong, setIsLong] = useState(true);\n\tconst [entryPrice, setEntryPrice] = useState(2000); // mock price\n\tconst [margin, setMargin] = useState(\"\");\n\tconst [positions, setPositions] = useState<any[]>([]);\n\tconst [message, setMessage] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tconst link = document.createElement(\"link\");\n\t\tlink.href =\n\t\t\t\"https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap\";\n\t\tlink.rel = \"stylesheet\";\n\t\tdocument.head.appendChild(link);\n\t\treturn () => {\n\t\t\tdocument.head.removeChild(link);\n\t\t};\n\t}, []);\n\n\tfunction handleOpenPosition() {\n\t\tif (!size || !margin || isNaN(Number(size)) || isNaN(Number(margin))) {\n\t\t\tsetMessage(\"Enter valid size and margin\");\n\t\t\treturn;\n\t\t}\n\t\tconst pos = {\n\t\t\tid: nextPositionId++,\n\t\t\tasset,\n\t\t\tsize: Number(size),\n\t\t\tentryPrice,\n\t\t\tmargin: Number(margin),\n\t\t\tleverage,\n\t\t\tisLong,\n\t\t\tisOpen: true,\n\t\t};\n\t\tsetPositions((p) => [...p, pos]);\n\t\tsetMessage(\n\t\t\t`Opened ${isLong ? \"Long\" : \"Short\"} position on ${getSymbol(asset)}`\n\t\t);\n\t\tsetSize(\"\");\n\t\tsetMargin(\"\");\n\t}\n\n\tfunction handleClosePosition(id: number) {\n\t\tsetPositions((p) =>\n\t\t\tp.map((pos) =>\n\t\t\t\tpos.id === id\n\t\t\t\t\t? { ...pos, isOpen: false, closePrice: entryPrice }\n\t\t\t\t\t: pos\n\t\t\t)\n\t\t);\n\t\tsetMessage(\"Closed position\");\n\t}\n\n\tfunction getSymbol(address: string) {\n\t\treturn (\n\t\t\tmockAssets.find((a) => a.address === address)?.symbol || \"?\"\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"centered-container\">\n\t\t\t<div className=\"max-w-xl w-full\">\n\t\t\t\t<h1 className=\"text-3xl font-bold mb-4 shadow-title\">Trade</h1>\n\t\t\t\t<p className=\"text-gray-600 mb-6\">\n\t\t\t\t\tOpen or close leveraged positions on supported asset pairs.\n\t\t\t\t</p>\n\t\t\t\t<div className=\"card mb-6\">\n\t\t\t\t\t<div className=\"mb-4\">\n\t\t\t\t\t\t<label className=\"block mb-1 font-medium\">Asset</label>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\tvalue={asset}\n\t\t\t\t\t\t\tonChange={(e) => setAsset(e.target.value)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{mockAssets.map((a) => (\n\t\t\t\t\t\t\t\t<option key={a.address} value={a.address}>\n\t\t\t\t\t\t\t\t\t{a.symbol}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-4 flex gap-4\">\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<label className=\"block mb-1 font-medium\">Size</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\tvalue={size}\n\t\t\t\t\t\t\t\tonChange={(e) => setSize(e.target.value)}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<label className=\"block mb-1 font-medium\">Margin</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\tvalue={margin}\n\t\t\t\t\t\t\t\tonChange={(e) => setMargin(e.target.value)}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-4 flex gap-4\">\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<label className=\"block mb-1 font-medium\">Leverage</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\tvalue={leverage}\n\t\t\t\t\t\t\t\tonChange={(e) => setLeverage(Number(e.target.value))}\n\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex-1 flex items-end gap-2\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tisLong\n\t\t\t\t\t\t\t\t\t\t? \"bg-[#6366f1] text-white\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-[#f1f5f9] text-[#1a202c]\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={() => setIsLong(true)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tLong\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t!isLong\n\t\t\t\t\t\t\t\t\t\t? \"bg-[#6366f1] text-white\"\n\t\t\t\t\t\t\t\t\t\t: \"bg-[#f1f5f9] text-[#1a202c]\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={() => setIsLong(false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tShort\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\tonClick={handleOpenPosition}\n\t\t\t\t\t>\n\t\t\t\t\t\tOpen Position\n\t\t\t\t\t</button>\n\t\t\t\t\t{message && (\n\t\t\t\t\t\t<div className=\"mt-4 text-[#6366f1] font-semibold\">\n\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"card\">\n\t\t\t\t\t<h2 className=\"text-xl font-semibold mb-2\">\n\t\t\t\t\t\tOpen Positions\n\t\t\t\t\t</h2>\n\t\t\t\t\t<table className=\"w-full text-left\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th className=\"py-1\">ID</th>\n\t\t\t\t\t\t\t\t<th className=\"py-1\">Asset</th>\n\t\t\t\t\t\t\t\t<th className=\"py-1\">Size</th>\n\t\t\t\t\t\t\t\t<th className=\"py-1\">Leverage</th>\n\t\t\t\t\t\t\t\t<th className=\"py-1\">Type</th>\n\t\t\t\t\t\t\t\t<th className=\"py-1\">Status</th>\n\t\t\t\t\t\t\t\t<th className=\"py-1\">Action</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{positions.length === 0 && (\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\tcolSpan={7}\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-gray-400 py-2 text-center\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tNo open positions\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{positions.map((pos) => (\n\t\t\t\t\t\t\t\t<tr key={pos.id} className=\"border-t\">\n\t\t\t\t\t\t\t\t\t<td className=\"py-1\">{pos.id}</td>\n\t\t\t\t\t\t\t\t\t<td className=\"py-1\">{getSymbol(pos.asset)}</td>\n\t\t\t\t\t\t\t\t\t<td className=\"py-1\">{pos.size}</td>\n\t\t\t\t\t\t\t\t\t<td className=\"py-1\">{pos.leverage}x</td>\n\t\t\t\t\t\t\t\t\t<td className=\"py-1\">\n\t\t\t\t\t\t\t\t\t\t{pos.isLong ? \"Long\" : \"Short\"}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"py-1\">\n\t\t\t\t\t\t\t\t\t\t{pos.isOpen ? \"Open\" : \"Closed\"}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"py-1\">\n\t\t\t\t\t\t\t\t\t\t{pos.isOpen && (\n\t\t\t\t\t\t\t\t\t\t\t<button onClick={() => handleClosePosition(pos.id)}>\n\t\t\t\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{!pos.isOpen && (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-400\">Closed</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}"],"names":[],"mappings":"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","debugId":null}}]
}